# 数组与字符串

## 数组基础

### 数组的定义

数组是一种线性数据结构，用于存储相同类型的元素集合。在JavaScript中，数组可以存储不同类型的元素，并且是动态的，可以根据需要调整大小。

### JavaScript中的数组特性

1. **动态大小**：JavaScript数组的大小可以动态调整
2. **混合类型**：可以存储不同类型的元素
3. **稀疏数组**：索引不一定连续，可以有空槽
4. **类数组对象**：某些JavaScript对象（如arguments、NodeList）类似数组但不是真正的数组

### 数组的基本操作

#### 创建数组

```javascript
// 字面量语法
const arr1 = [1, 2, 3, 4, 5];

// 构造函数语法
const arr2 = new Array(1, 2, 3, 4, 5);

// 创建指定长度的空数组
const arr3 = new Array(5); // 创建长度为5的空数组

// Array.from 方法
const arr4 = Array.from('hello'); // ['h', 'e', 'l', 'l', 'o']

// Array.of 方法
const arr5 = Array.of(5); // [5]，与 new Array(5) 不同
```

#### 访问和修改元素

```javascript
const arr = [10, 20, 30, 40, 50];

// 访问元素
console.log(arr[0]); // 10
console.log(arr[2]); // 30

// 修改元素
arr[1] = 25;
console.log(arr); // [10, 25, 30, 40, 50]

// 获取数组长度
console.log(arr.length); // 5

// 通过修改length属性可以截断数组
arr.length = 3;
console.log(arr); // [10, 25, 30]
```

#### 添加和删除元素

```javascript
const arr = [1, 2, 3];

// 末尾添加元素
arr.push(4, 5);
console.log(arr); // [1, 2, 3, 4, 5]

// 开头添加元素
arr.unshift(0);
console.log(arr); // [0, 1, 2, 3, 4, 5]

// 末尾删除元素
const lastElement = arr.pop();
console.log(lastElement); // 5
console.log(arr); // [0, 1, 2, 3, 4]

// 开头删除元素
const firstElement = arr.shift();
console.log(firstElement); // 0
console.log(arr); // [1, 2, 3, 4]

// 任意位置添加/删除元素
// splice(起始索引, 删除数量, 添加的元素...)
arr.splice(1, 1, 'a', 'b');
console.log(arr); // [1, 'a', 'b', 3, 4]
```

## 数组常用方法

### 遍历数组

```javascript
const arr = [1, 2, 3, 4, 5];

// for循环
for (let i = 0; i < arr.length; i++) {
  console.log(arr[i]);
}

// for...of循环
for (const item of arr) {
  console.log(item);
}

// forEach方法
arr.forEach((item, index) => {
  console.log(`索引${index}: ${item}`);
});

// map方法 - 返回新数组
const doubled = arr.map(item => item * 2);
console.log(doubled); // [2, 4, 6, 8, 10]

// filter方法 - 返回符合条件的元素组成的新数组
const evenNumbers = arr.filter(item => item % 2 === 0);
console.log(evenNumbers); // [2, 4]

// reduce方法 - 将数组减少为单个值
const sum = arr.reduce((accumulator, current) => accumulator + current, 0);
console.log(sum); // 15
```

### 查找元素

```javascript
const arr = [10, 20, 30, 40, 20, 50];

// indexOf - 返回第一个匹配元素的索引，未找到返回-1
console.log(arr.indexOf(20)); // 1
console.log(arr.indexOf(60)); // -1

// lastIndexOf - 从后向前查找
console.log(arr.lastIndexOf(20)); // 4

// includes - 检查数组是否包含某个元素
console.log(arr.includes(30)); // true
console.log(arr.includes(60)); // false

// find - 返回第一个满足条件的元素
const found = arr.find(item => item > 25);
console.log(found); // 30

// findIndex - 返回第一个满足条件的元素的索引
const foundIndex = arr.findIndex(item => item > 25);
console.log(foundIndex); // 2
```

### 数组排序和操作

```javascript
const arr = [3, 1, 4, 1, 5, 9, 2, 6];

// sort - 对数组进行排序（默认按字符串顺序）
arr.sort();
console.log(arr); // [1, 1, 2, 3, 4, 5, 6, 9]

// 自定义排序函数
const nums = [10, 5, 8, 2, 1];
nums.sort((a, b) => a - b); // 升序
console.log(nums); // [1, 2, 5, 8, 10]

// reverse - 反转数组
nums.reverse();
console.log(nums); // [10, 8, 5, 2, 1]

// concat - 合并数组
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];
const combined = arr1.concat(arr2);
console.log(combined); // [1, 2, 3, 4, 5, 6]

// slice - 提取数组的一部分
const sliced = combined.slice(2, 5);
console.log(sliced); // [3, 4, 5]

// join - 将数组元素连接成字符串
const joined = arr1.join('-');
console.log(joined); // "1-2-3"
```

### ES6+新增数组方法

```javascript
// Array.from - 从类数组对象或可迭代对象创建新数组
const str = 'hello';
const chars = Array.from(str);
console.log(chars); // ['h', 'e', 'l', 'l', 'o']

// Array.of - 创建具有可变数量参数的新数组
const arr = Array.of(1, 2, 3);
console.log(arr); // [1, 2, 3]

// fill - 用固定值填充数组
const filled = new Array(3).fill(0);
console.log(filled); // [0, 0, 0]

// flat - 扁平化嵌套数组
const nested = [1, [2, [3, 4]]];
console.log(nested.flat()); // [1, 2, [3, 4]]
console.log(nested.flat(2)); // [1, 2, 3, 4]

// flatMap - 先映射再扁平化
const sentences = ['hello world', 'goodbye world'];
const words = sentences.flatMap(sentence => sentence.split(' '));
console.log(words); // ['hello', 'world', 'goodbye', 'world']
```

## 数组的时间复杂度

| 操作 | 时间复杂度 | 说明 |
|------|-----------|------|
| 访问元素 | O(1) | 通过索引直接访问 |
| 查找元素 | O(n) | 需要遍历数组 |
| push/pop | O(1) | 在末尾添加/删除元素 |
| unshift/shift | O(n) | 在开头添加/删除元素，需要移动其他元素 |
| splice | O(n) | 可能需要移动元素 |
| sort | O(n log n) | 排序算法的平均时间复杂度 |

## 字符串基础

### 字符串的定义

字符串是由零个或多个字符组成的有序序列。在JavaScript中，字符串是不可变的，这意味着一旦创建，就不能修改。

### 创建字符串

```javascript
// 字符串字面量
const str1 = 'Hello';
const str2 = "World";
const str3 = `Hello World`; // 模板字符串（ES6）

// String构造函数
const str4 = new String('Hello'); // 创建String对象，不推荐
```

### 字符串的基本操作

#### 访问字符

```javascript
const str = 'Hello';

// 使用charAt方法
console.log(str.charAt(0)); // 'H'

// 使用方括号（类似数组）
console.log(str[1]); // 'e'

// 获取字符串长度
console.log(str.length); // 5
```

#### 字符串拼接

```javascript
const firstName = 'John';
const lastName = 'Doe';

// 使用+运算符
const fullName1 = firstName + ' ' + lastName;
console.log(fullName1); // 'John Doe'

// 使用模板字符串（ES6）
const fullName2 = `${firstName} ${lastName}`;
console.log(fullName2); // 'John Doe'

// 使用concat方法
const fullName3 = firstName.concat(' ', lastName);
console.log(fullName3); // 'John Doe'
```

## 字符串常用方法

### 查找和提取

```javascript
const str = 'Hello World';

// indexOf - 查找子字符串，返回首次出现的索引
console.log(str.indexOf('o')); // 4
console.log(str.indexOf('o', 5)); // 7 (从索引5开始查找)

// lastIndexOf - 从后向前查找
console.log(str.lastIndexOf('o')); // 7

// includes - 检查是否包含子字符串
console.log(str.includes('World')); // true

// startsWith/endsWith - 检查是否以特定子字符串开始/结束
console.log(str.startsWith('Hello')); // true
console.log(str.endsWith('World')); // true

// substring - 提取子字符串
console.log(str.substring(0, 5)); // 'Hello'

// slice - 提取子字符串，支持负索引
console.log(str.slice(6)); // 'World'
console.log(str.slice(-5)); // 'World'

// split - 分割字符串为数组
console.log(str.split(' ')); // ['Hello', 'World']
```

### 修改字符串

```javascript
const str = 'Hello World';

// replace - 替换子字符串（只替换第一个匹配项）
console.log(str.replace('o', 'x')); // 'Hellx World'

// replaceAll - 替换所有匹配项（ES2021）
console.log(str.replaceAll('o', 'x')); // 'Hellx Wxrld'

// toLowerCase/toUpperCase - 转换为小写/大写
console.log(str.toLowerCase()); // 'hello world'
console.log(str.toUpperCase()); // 'HELLO WORLD'

// trim - 去除首尾空格
const paddedStr = '  Hello World  ';
console.log(paddedStr.trim()); // 'Hello World'
console.log(paddedStr.trimStart()); // 'Hello World  '
console.log(paddedStr.trimEnd()); // '  Hello World'

// padStart/padEnd - 填充字符串到指定长度
console.log('5'.padStart(3, '0')); // '005'
console.log('5'.padEnd(3, '0')); // '500'
```

### 正则表达式与字符串

```javascript
const str = 'Hello World 123';

// match - 查找匹配项
const matches = str.match(/\d+/); // 查找数字
console.log(matches[0]); // '123'

// matchAll - 查找所有匹配项（ES2020）
const regex = /[a-z]/g; // 查找所有小写字母
const allMatches = [...str.matchAll(regex)];
console.log(allMatches.map(match => match[0])); // ['e', 'l', 'l', 'o', 'o', 'r', 'l', 'd']

// search - 查找匹配项的索引
console.log(str.search(/\d+/)); // 12

// test - 检查是否存在匹配项
console.log(/World/.test(str)); // true
```

## 字符串的时间复杂度

| 操作 | 时间复杂度 | 说明 |
|------|-----------|------|
| 访问字符 | O(1) | 通过索引直接访问 |
| 查找子字符串 | O(n*m) | n是字符串长度，m是子字符串长度 |
| 拼接字符串 | O(n+m) | n和m是两个字符串的长度 |
| 替换子字符串 | O(n) | n是字符串长度 |

## 数组和字符串的常见算法题

### 1. 两数之和

```javascript
/**
 * 给定一个整数数组和一个目标值，找出数组中和为目标值的两个数的索引
 */
function twoSum(nums, target) {
  const map = new Map();

  for (let i = 0; i < nums.length; i++) {
    const complement = target - nums[i];

    if (map.has(complement)) {
      return [map.get(complement), i];
    }

    map.set(nums[i], i);
  }

  return [];
}

console.log(twoSum([2, 7, 11, 15], 9)); // [0, 1]
```

### 2. 回文字符串判断

```javascript
/**
 * 判断一个字符串是否是回文字符串（正着读和倒着读一样）
 */
function isPalindrome(s) {
  // 将字符串转换为小写，并移除非字母数字字符
  s = s.toLowerCase().replace(/[^a-z0-9]/g, '');

  // 双指针法
  let left = 0;
  let right = s.length - 1;

  while (left < right) {
    if (s[left] !== s[right]) {
      return false;
    }
    left++;
    right--;
  }

  return true;
}

console.log(isPalindrome("A man, a plan, a canal: Panama")); // true
console.log(isPalindrome("race a car")); // false
```

### 3. 最长公共前缀

```javascript
/**
 * 查找字符串数组中的最长公共前缀
 */
function longestCommonPrefix(strs) {
  if (strs.length === 0) return "";

  // 以第一个字符串为基准
  let prefix = strs[0];

  for (let i = 1; i < strs.length; i++) {
    // 当前字符串不以prefix为前缀时，缩短prefix
    while (strs[i].indexOf(prefix) !== 0) {
      prefix = prefix.substring(0, prefix.length - 1);
      if (prefix === "") return "";
    }
  }

  return prefix;
}

console.log(longestCommonPrefix(["flower", "flow", "flight"])); // "fl"
console.log(longestCommonPrefix(["dog", "racecar", "car"])); // ""
```

### 4. 有效的括号

```javascript
/**
 * 判断字符串中的括号是否有效匹配
 */
function isValidParentheses(s) {
  const stack = [];
  const map = {
    '(': ')',
    '[': ']',
    '{': '}'
  };

  for (let i = 0; i < s.length; i++) {
    const char = s[i];

    if (map[char]) { // 左括号
      stack.push(char);
    } else { // 右括号
      const top = stack.pop();

      if (map[top] !== char) {
        return false;
      }
    }
  }

  return stack.length === 0;
}

console.log(isValidParentheses("()[]{}")); // true
console.log(isValidParentheses("([)]")); // false
```

### 5. 合并两个有序数组

```javascript
/**
 * 合并两个有序数组
 */
function merge(nums1, m, nums2, n) {
  let i = m - 1; // nums1的末尾索引
  let j = n - 1; // nums2的末尾索引
  let k = m + n - 1; // 合并后数组的末尾索引

  while (i >= 0 && j >= 0) {
    if (nums1[i] > nums2[j]) {
      nums1[k--] = nums1[i--];
    } else {
      nums1[k--] = nums2[j--];
    }
  }

  // 如果nums2还有剩余元素
  while (j >= 0) {
    nums1[k--] = nums2[j--];
  }

  return nums1;
}

console.log(merge([1, 3, 5, 0, 0, 0], 3, [2, 4, 6], 3)); // [1, 2, 3, 4, 5, 6]
```

## 前端应用场景

### 数组应用场景

1. **数据列表渲染**：使用数组存储列表数据，通过map方法渲染到UI
2. **表单数据处理**：收集表单字段值到数组中进行批量处理
3. **分页数据处理**：存储分页数据和处理分页逻辑
4. **状态管理**：在Redux等状态管理库中存储应用状态
5. **虚拟DOM diff算法**：使用数组表示组件树结构
6. **事件处理**：存储和管理事件监听器
7. **数据缓存**：缓存API请求结果

### 字符串应用场景

1. **表单验证**：验证用户输入的格式（邮箱、手机号等）
2. **URL处理**：解析和构建URL
3. **模板渲染**：使用模板字符串生成HTML
4. **国际化**：处理多语言文本
5. **富文本编辑**：处理和格式化文本内容
6. **数据格式化**：格式化日期、货币等
7. **搜索功能**：实现文本搜索和高亮

## 面试常见问题

1. JavaScript中数组和对象的区别是什么？
2. 如何判断一个变量是否是数组？
3. 数组的forEach和map方法有什么区别？
4. 如何实现数组去重？
5. 字符串和数组有什么相似之处和不同之处？
6. JavaScript中字符串为什么是不可变的？这有什么影响？
7. 如何高效地拼接大量字符串？
8. 解释一下JavaScript中的稀疏数组。
9. 如何实现数组的浅拷贝和深拷贝？
10. 如何检测字符串中是否包含特定的子字符串？有哪些方法？

## 学习资源

- [MDN Web Docs - Array](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array) - JavaScript数组详细文档
- [MDN Web Docs - String](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String) - JavaScript字符串详细文档
- [JavaScript数据结构与算法](https://github.com/trekhleb/javascript-algorithms) - GitHub上的JS算法实现
- [LeetCode数组题集](https://leetcode.com/tag/array/) - 数组相关算法练习
- [LeetCode字符串题集](https://leetcode.com/tag/string/) - 字符串相关算法练习
- [前端进阶之道](https://juejin.cn/post/6844903776512393224) - 前端视角的数据结构讲解