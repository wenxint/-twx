# æ­£åˆ™è¡¨è¾¾å¼

> æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ç§ç”¨äºåŒ¹é…å­—ç¬¦ä¸²ä¸­å­—ç¬¦ç»„åˆçš„æ¨¡å¼ï¼Œæ˜¯å‰ç«¯å¼€å‘ä¸­å¸¸ç”¨çš„æ–‡æœ¬å¤„ç†å·¥å…·ã€‚

## åŸºæœ¬æ¦‚å¿µ

æ­£åˆ™è¡¨è¾¾å¼(Regular Expressionï¼Œç®€ç§°RegExp)æ˜¯ç”¨äºåŒ¹é…å­—ç¬¦ä¸²ä¸­å­—ç¬¦ç»„åˆçš„æ¨¡å¼ã€‚åœ¨JavaScriptä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¹Ÿæ˜¯å¯¹è±¡ã€‚æ­£åˆ™è¡¨è¾¾å¼é€šè¿‡å°†æ–‡æœ¬ä¸ä¸€ä¸ªæ¨¡å¼åŒ¹é…æ¥å‘æŒ¥ä½œç”¨ï¼Œåœ¨æ–‡æœ¬æœç´¢ã€éªŒè¯ã€æå–å’Œæ›¿æ¢ç­‰åœºæ™¯æœ‰å¹¿æ³›åº”ç”¨ã€‚

### åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼

JavaScriptä¸­åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼æœ‰ä¸¤ç§æ–¹å¼ï¼š

```javascript
/**
 * @description ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼
 * @example
 */
const regex1 = /pattern/flags;

/**
 * @description ä½¿ç”¨RegExpæ„é€ å‡½æ•°åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼
 * @example
 */
const regex2 = new RegExp('pattern', 'flags');

// ä½¿ç”¨ç¤ºä¾‹
const patternLiteral = /hello/i;
const patternConstructor = new RegExp('hello', 'i');

// æµ‹è¯•ä¸¤ç§æ–¹å¼
console.log(patternLiteral.test('Hello World'));     // true
console.log(patternConstructor.test('Hello World')); // true

// ä¸¤ç§æ–¹å¼çš„åŒºåˆ«æ¼”ç¤º
const searchTerm = 'user\\w+';  // å‡è®¾è¿™æ˜¯åŠ¨æ€è·å–çš„æœç´¢è¯

// å­—é¢é‡æ–¹å¼éœ€è¦é¢å¤–å¤„ç†è½¬ä¹‰
const badRegex = /searchTerm/;  // è¿™ä¼šåŒ¹é…å­—ç¬¦ä¸² "searchTerm"
console.log(badRegex.test('searchTerm'));      // true
console.log(badRegex.test('user123'));         // false

// æ„é€ å‡½æ•°æ–¹å¼å¯ä»¥ç›´æ¥ä½¿ç”¨å˜é‡
const dynamicRegex = new RegExp(searchTerm);
console.log(dynamicRegex.test('searchTerm'));  // false
console.log(dynamicRegex.test('user123'));     // true

// æ‰§è¡Œç»“æœåˆ†æ:
// å­—é¢é‡æ–¹å¼åœ¨ä»£ç ç¼–è¯‘æ—¶å°±å·²ç¡®å®šï¼Œé€‚åˆå›ºå®šæ¨¡å¼
// æ„é€ å‡½æ•°æ–¹å¼åœ¨è¿è¡Œæ—¶æ„å»ºï¼Œé€‚åˆåŠ¨æ€ç”Ÿæˆçš„æ¨¡å¼
```

### æ­£åˆ™è¡¨è¾¾å¼æ ‡å¿—(flags)

æ ‡å¿—ç”¨äºæ§åˆ¶æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…è¡Œä¸ºã€‚å¸¸ç”¨çš„æ ‡å¿—åŒ…æ‹¬ï¼š

```javascript
/**
 * @description æ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨æ ‡å¿—ç¤ºä¾‹
 */

// g (global): å…¨å±€åŒ¹é…ï¼ŒæŸ¥æ‰¾æ‰€æœ‰åŒ¹é…é¡¹
const globalRegex = /test/g;
console.log('test1 test2 test3'.match(globalRegex));
// è¾“å‡º: ["test", "test", "test"]

// i (ignoreCase): å¿½ç•¥å¤§å°å†™
const ignoreCaseRegex = /test/i;
console.log('Test'.match(ignoreCaseRegex));
// è¾“å‡º: ["Test"]

// m (multiline): å¤šè¡ŒåŒ¹é…ï¼Œå½±å“ ^ å’Œ $
const multilineRegex = /^test/m;
console.log('line1\ntest line2'.match(multilineRegex));
// è¾“å‡º: ["test"]

// s (dotAll): å…è®¸ . åŒ¹é…æ¢è¡Œç¬¦
const dotAllRegex = /hello.world/s;
console.log('hello\nworld'.match(dotAllRegex));
// è¾“å‡º: ["hello\nworld"]

// u (unicode): ä½¿ç”¨Unicodeç ç‚¹åŒ¹é…
const unicodeRegex = /\u{1F60D}/u;
console.log('ğŸ˜'.match(unicodeRegex));
// è¾“å‡º: ["ğŸ˜"]

// y (sticky): ç²˜æ€§åŒ¹é…ï¼Œä»lastIndexå¼€å§‹åŒ¹é…
const stickyRegex = /test/y;
stickyRegex.lastIndex = 5;
console.log('0123 test'.match(stickyRegex));
// è¾“å‡º: ["test"]

// ç»„åˆä½¿ç”¨å¤šä¸ªæ ‡å¿—
const combinedRegex = /test/gi;
console.log('Test test TEST'.match(combinedRegex));
// è¾“å‡º: ["Test", "test", "TEST"]
```

## æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•

### å­—ç¬¦ç±»

å­—ç¬¦ç±»ç”¨äºåŒ¹é…ä¸€ç»„å­—ç¬¦ä¸­çš„ä»»æ„ä¸€ä¸ªã€‚

```javascript
/**
 * @description æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ç±»ç¤ºä¾‹
 */

// . åŒ¹é…é™¤æ¢è¡Œç¬¦å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦
console.log('a1@'.match(/./g));  // ["a", "1", "@"]

// \d åŒ¹é…ä»»æ„æ•°å­—ï¼Œç­‰ä»·äº[0-9]
console.log('abc123xyz'.match(/\d/g));  // ["1", "2", "3"]

// \D åŒ¹é…ä»»æ„éæ•°å­—ï¼Œç­‰ä»·äº[^0-9]
console.log('abc123xyz'.match(/\D/g));  // ["a", "b", "c", "x", "y", "z"]

// \w åŒ¹é…ä»»æ„å­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿ï¼Œç­‰ä»·äº[A-Za-z0-9_]
console.log('abc_123$xyz'.match(/\w/g));  // ["a", "b", "c", "_", "1", "2", "3", "x", "y", "z"]

// \W åŒ¹é…ä»»æ„éå­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿ï¼Œç­‰ä»·äº[^A-Za-z0-9_]
console.log('abc_123$xyz'.match(/\W/g));  // ["$"]

// \s åŒ¹é…ä»»æ„ç©ºç™½å­—ç¬¦
console.log('a b\tc\nd'.match(/\s/g));  // [" ", "\t", "\n"]

// \S åŒ¹é…ä»»æ„éç©ºç™½å­—ç¬¦
console.log('a b\tc'.match(/\S/g));  // ["a", "b", "c"]

// \b åŒ¹é…å•è¯è¾¹ç•Œ
console.log('word boundary'.match(/\bword\b/g));  // ["word"]

// \B åŒ¹é…éå•è¯è¾¹ç•Œ
console.log('wording'.match(/\Bord\B/g));  // ["ord"]

// æ€§èƒ½æ¯”è¾ƒ
console.time('å­—ç¬¦ç±»');
for (let i = 0; i < 1000000; i++) {
  /\d/.test('123');
}
console.timeEnd('å­—ç¬¦ç±»');

console.time('ç­‰ä»·å­—ç¬¦é›†');
for (let i = 0; i < 1000000; i++) {
  /[0-9]/.test('123');
}
console.timeEnd('ç­‰ä»·å­—ç¬¦é›†');
// é€šå¸¸å­—ç¬¦ç±»(\d)æ¯”ç­‰ä»·å­—ç¬¦é›†([0-9])æ€§èƒ½ç•¥å¥½
```

| è¡¨è¾¾å¼ | æè¿° |
|-------|------|
| `.` | åŒ¹é…é™¤æ¢è¡Œç¬¦å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦ |
| `\d` | åŒ¹é…ä»»æ„æ•°å­—ï¼Œç­‰ä»·äº`[0-9]` |
| `\D` | åŒ¹é…ä»»æ„éæ•°å­—ï¼Œç­‰ä»·äº`[^0-9]` |
| `\w` | åŒ¹é…ä»»æ„å­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿ï¼Œç­‰ä»·äº`[A-Za-z0-9_]` |
| `\W` | åŒ¹é…ä»»æ„éå­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿ï¼Œç­‰ä»·äº`[^A-Za-z0-9_]` |
| `\s` | åŒ¹é…ä»»æ„ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ |
| `\S` | åŒ¹é…ä»»æ„éç©ºç™½å­—ç¬¦ |
| `\b` | åŒ¹é…å•è¯è¾¹ç•Œ |
| `\B` | åŒ¹é…éå•è¯è¾¹ç•Œ |

### å­—ç¬¦é›†åˆ

å­—ç¬¦é›†åˆæä¾›äº†æ›´çµæ´»çš„å­—ç¬¦åŒ¹é…æ–¹å¼ã€‚

```javascript
/**
 * @description æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦é›†åˆç¤ºä¾‹
 */

// [abc] åŒ¹é…æ–¹æ‹¬å·ä¸­çš„ä»»æ„å­—ç¬¦
console.log('apple banana cherry'.match(/[abc]/g));
// ["a", "a", "a", "a", "c"]

// [^abc] åŒ¹é…é™¤äº†æ–¹æ‹¬å·ä¸­å­—ç¬¦çš„ä»»æ„å­—ç¬¦
console.log('apple banana cherry'.match(/[^abc]/g));
// ["p", "p", "l", "e", " ", "b", "n", "n", " ", "h", "e", "r", "r", "y"]

// [a-z] åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å­—ç¬¦
console.log('a1B2c3'.match(/[a-z]/g));
// ["a", "c"]

// [a-zA-Z0-9] åŒ¹é…å¤šä¸ªèŒƒå›´çš„ä»»æ„å­—ç¬¦
console.log('a1B2c3!@#'.match(/[a-zA-Z0-9]/g));
// ["a", "1", "B", "2", "c", "3"]

// å­—ç¬¦é›†åˆä¸å­—ç¬¦ç±»ç»„åˆä½¿ç”¨
console.log('test123'.match(/[a-z\d]/g));
// ["t", "e", "s", "t", "1", "2", "3"]

// å®é™…åº”ç”¨ï¼šéªŒè¯å¯†ç æ˜¯å¦åŒ…å«ç‰¹æ®Šå­—ç¬¦
function hasSpecialChar(password) {
  return /[^A-Za-z0-9]/.test(password);
}

console.log(hasSpecialChar('abc123'));  // false
console.log(hasSpecialChar('abc123!'));  // true

// ä½¿ç”¨å­—ç¬¦é›†åˆæå–æ–‡æœ¬ä¸­çš„æ‰€æœ‰å…ƒéŸ³å­—æ¯
const text = 'JavaScript is awesome!';
const vowels = text.match(/[aeiou]/gi);
console.log(vowels);  // ["a", "a", "i", "i", "a", "e", "o", "e"]
```

| è¡¨è¾¾å¼ | æè¿° |
|-------|------|
| `[abc]` | åŒ¹é…æ–¹æ‹¬å·ä¸­çš„ä»»æ„å­—ç¬¦ |
| `[^abc]` | åŒ¹é…é™¤äº†æ–¹æ‹¬å·ä¸­å­—ç¬¦çš„ä»»æ„å­—ç¬¦ |
| `[a-z]` | åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ |
| `[a-zA-Z0-9]` | åŒ¹é…å¤šä¸ªèŒƒå›´çš„ä»»æ„å­—ç¬¦ |

### é‡è¯

é‡è¯ç”¨äºæŒ‡å®šè¡¨è¾¾å¼åŒ¹é…çš„æ¬¡æ•°ã€‚

```javascript
/**
 * @description æ­£åˆ™è¡¨è¾¾å¼é‡è¯ç¤ºä¾‹
 */

// * åŒ¹é…å‰ä¸€ä¸ªè¡¨è¾¾å¼0æ¬¡æˆ–å¤šæ¬¡
console.log('aaa'.match(/a*/g));
// ["aaa", "", "", ""]

// + åŒ¹é…å‰ä¸€ä¸ªè¡¨è¾¾å¼1æ¬¡æˆ–å¤šæ¬¡
console.log('aaa'.match(/a+/g));
// ["aaa"]

// ? åŒ¹é…å‰ä¸€ä¸ªè¡¨è¾¾å¼0æ¬¡æˆ–1æ¬¡
console.log('color colour'.match(/colou?r/g));
// ["color", "colour"]

// {n} ç²¾ç¡®åŒ¹é…å‰ä¸€ä¸ªè¡¨è¾¾å¼næ¬¡
console.log('aaa'.match(/a{2}/g));
// ["aa"]

// {n,} åŒ¹é…å‰ä¸€ä¸ªè¡¨è¾¾å¼è‡³å°‘næ¬¡
console.log('aaa'.match(/a{2,}/g));
// ["aaa"]

// {n,m} åŒ¹é…å‰ä¸€ä¸ªè¡¨è¾¾å¼nåˆ°mæ¬¡
console.log('aaa'.match(/a{1,2}/g));
// ["aa", "a"]

// é‡è¯ä¸å­—ç¬¦ç±»ç»„åˆä½¿ç”¨
const numbers = '42 555 1234 123456';

// åŒ¹é…2-3ä½æ•°å­—
console.log(numbers.match(/\b\d{2,3}\b/g));
// ["42", "555"]

// åŒ¹é…4ä½åŠä»¥ä¸Šæ•°å­—
console.log(numbers.match(/\b\d{4,}\b/g));
// ["1234", "123456"]

// å®é™…åº”ç”¨ï¼šéªŒè¯æ‰‹æœºå·ç ï¼ˆä¸­å›½å¤§é™†ï¼Œ11ä½ï¼‰
function isValidChinesePhone(phone) {
  return /^1[3-9]\d{9}$/.test(phone);
}

console.log(isValidChinesePhone('13812345678'));  // true
console.log(isValidChinesePhone('138123456'));    // false (ä½æ•°ä¸å¤Ÿ)
console.log(isValidChinesePhone('23812345678'));  // false (ä¸æ˜¯1å¼€å¤´)

// é‡è¯æ€§èƒ½æ¯”è¾ƒ
const text = 'a'.repeat(100) + 'b';

console.time('è´ªå©ªåŒ¹é…');
/a+b/.test(text);
console.timeEnd('è´ªå©ªåŒ¹é…');

console.time('æƒ°æ€§åŒ¹é…');
/a+?b/.test(text);
console.timeEnd('æƒ°æ€§åŒ¹é…');
// åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè´ªå©ªåŒ¹é…é€šå¸¸æ¯”æƒ°æ€§åŒ¹é…æ›´å¿«
```

| è¡¨è¾¾å¼ | æè¿° |
|-------|------|
| `*` | åŒ¹é…å‰ä¸€ä¸ªè¡¨è¾¾å¼0æ¬¡æˆ–å¤šæ¬¡ |
| `+` | åŒ¹é…å‰ä¸€ä¸ªè¡¨è¾¾å¼1æ¬¡æˆ–å¤šæ¬¡ |
| `?` | åŒ¹é…å‰ä¸€ä¸ªè¡¨è¾¾å¼0æ¬¡æˆ–1æ¬¡ï¼Œå³å¯é€‰ |
| `{n}` | ç²¾ç¡®åŒ¹é…å‰ä¸€ä¸ªè¡¨è¾¾å¼næ¬¡ |
| `{n,}` | åŒ¹é…å‰ä¸€ä¸ªè¡¨è¾¾å¼è‡³å°‘næ¬¡ |
| `{n,m}` | åŒ¹é…å‰ä¸€ä¸ªè¡¨è¾¾å¼nåˆ°mæ¬¡ |

### è¾¹ç•ŒåŒ¹é…

è¾¹ç•ŒåŒ¹é…ç”¨äºæŒ‡å®šåŒ¹é…å‘ç”Ÿçš„ä½ç½®ï¼Œè€Œä¸æ˜¯åŒ¹é…å…·ä½“çš„å­—ç¬¦ã€‚

```javascript
/**
 * @description æ­£åˆ™è¡¨è¾¾å¼è¾¹ç•ŒåŒ¹é…ç¤ºä¾‹
 */

// ^ åŒ¹é…è¾“å…¥çš„å¼€å§‹
console.log('hello world'.match(/^hello/g));  // ["hello"]
console.log('say hello'.match(/^hello/g));    // null

// $ åŒ¹é…è¾“å…¥çš„ç»“æŸ
console.log('world hello'.match(/hello$/g));  // ["hello"]
console.log('hello world'.match(/hello$/g));  // null

// \b åŒ¹é…å•è¯è¾¹ç•Œ
console.log('hello world'.match(/\bhello\b/g));  // ["hello"]
console.log('helloworld'.match(/\bhello\b/g));   // null

// \B åŒ¹é…éå•è¯è¾¹ç•Œ
console.log('helloworld'.match(/\Bworld\b/g));   // ["world"]
console.log('hello world'.match(/\Bworld\b/g));  // null

// å¤šè¡Œæ¨¡å¼ä¸­çš„è¾¹ç•ŒåŒ¹é…
const multilineText = `First line
Second line
Third line`;

// ä¸ä½¿ç”¨å¤šè¡Œæ¨¡å¼ï¼ŒåªåŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²çš„å¼€å§‹
console.log(multilineText.match(/^First/g));  // ["First"]
console.log(multilineText.match(/^Second/g)); // null

// ä½¿ç”¨å¤šè¡Œæ¨¡å¼ï¼ŒåŒ¹é…æ¯ä¸€è¡Œçš„å¼€å§‹
console.log(multilineText.match(/^First/gm));  // ["First"]
console.log(multilineText.match(/^Second/gm)); // ["Second"]

// å®é™…åº”ç”¨ï¼šæå–ä»¥ç‰¹å®šå•è¯å¼€å¤´çš„è¡Œ
function getLinesStartingWith(text, word) {
  const regex = new RegExp(`^${word}.*$`, 'gm');
  return text.match(regex) || [];
}

const logs = `Error: File not found
Info: Process started
Warning: Low memory
Error: Connection timeout`;

console.log(getLinesStartingWith(logs, 'Error'));
// ["Error: File not found", "Error: Connection timeout"]

// è¾¹ç•ŒåŒ¹é…çš„æ€§èƒ½ä¼˜åŒ–
const longText = 'prefix' + 'a'.repeat(10000) + 'suffix';

console.time('æ— è¾¹ç•ŒåŒ¹é…');
/prefix.*suffix/.test(longText);
console.timeEnd('æ— è¾¹ç•ŒåŒ¹é…');

console.time('æœ‰è¾¹ç•ŒåŒ¹é…');
/^prefix.*suffix$/.test(longText);
console.timeEnd('æœ‰è¾¹ç•ŒåŒ¹é…');
// ä½¿ç”¨è¾¹ç•ŒåŒ¹é…é€šå¸¸èƒ½æé«˜æ€§èƒ½ï¼Œå› ä¸ºå¼•æ“å¯ä»¥æ›´å¿«ç¡®å®šåŒ¹é…ä½ç½®
```

| è¡¨è¾¾å¼ | æè¿° |
|-------|------|
| `^` | åŒ¹é…è¾“å…¥çš„å¼€å§‹ |
| `$` | åŒ¹é…è¾“å…¥çš„ç»“æŸ |
| `\b` | åŒ¹é…å•è¯è¾¹ç•Œ |
| `\B` | åŒ¹é…éå•è¯è¾¹ç•Œ |

### åˆ†ç»„ä¸å¼•ç”¨

åˆ†ç»„å…è®¸å°†æ­£åˆ™è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†è§†ä¸ºå•ä¸ªå•å…ƒï¼Œä¾¿äºåº”ç”¨é‡è¯æˆ–æå–åŒ¹é…å†…å®¹ã€‚

```javascript
/**
 * @description æ­£åˆ™è¡¨è¾¾å¼åˆ†ç»„ä¸å¼•ç”¨ç¤ºä¾‹
 */

// (pattern) æ•è·ç»„
const captureRegex = /(\d{4})-(\d{2})-(\d{2})/;
const dateStr = '2023-05-15';
const dateMatch = dateStr.match(captureRegex);

console.log(dateMatch);
// ["2023-05-15", "2023", "05", "15", index: 0, input: "2023-05-15", groups: undefined]

// é€šè¿‡ç´¢å¼•è®¿é—®æ•è·ç»„
console.log('å¹´ä»½:', dateMatch[1]);  // å¹´ä»½: 2023
console.log('æœˆä»½:', dateMatch[2]);  // æœˆä»½: 05
console.log('æ—¥æœŸ:', dateMatch[3]);  // æ—¥æœŸ: 15

// (?:pattern) éæ•è·ç»„
const nonCaptureRegex = /(?:\d{4})-(\d{2})-(\d{2})/;
const dateMatch2 = dateStr.match(nonCaptureRegex);

console.log(dateMatch2);
// ["2023-05-15", "05", "15", index: 0, input: "2023-05-15", groups: undefined]
// æ³¨æ„ç¬¬ä¸€ä¸ª\d{4}ä¸ä¼šè¢«æ•è·

// \n åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­å¼•ç”¨å‰é¢çš„æ•è·ç»„
const repeatWord = /(\w+)\s+\1/;
console.log('hello hello world'.match(repeatWord));
// ["hello hello", "hello", index: 0, input: "hello hello world", groups: undefined]

// åœ¨æ›¿æ¢å­—ç¬¦ä¸²ä¸­å¼•ç”¨æ•è·ç»„
const swapNames = 'John Smith';
const swapped = swapNames.replace(/(\w+)\s+(\w+)/, "$2, $1");
console.log(swapped);  // Smith, John

// (?<name>pattern) å‘½åæ•è·ç»„ (ES2018+)
const namedGroupRegex = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;
const namedMatch = dateStr.match(namedGroupRegex);

console.log(namedMatch.groups);
// { year: "2023", month: "05", day: "15" }

console.log('å¹´ä»½:', namedMatch.groups.year);   // å¹´ä»½: 2023
console.log('æœˆä»½:', namedMatch.groups.month);  // æœˆä»½: 05
console.log('æ—¥æœŸ:', namedMatch.groups.day);    // æ—¥æœŸ: 15

// åœ¨æ›¿æ¢å­—ç¬¦ä¸²ä¸­å¼•ç”¨å‘½åæ•è·ç»„
const namedSwapped = swapNames.replace(/(?<firstName>\w+)\s+(?<lastName>\w+)/, "$<lastName>, $<firstName>");
console.log(namedSwapped);  // Smith, John

// å®é™…åº”ç”¨ï¼šè§£æURL
function parseURL(url) {
  const urlRegex = /^(?:(?<protocol>\w+):\/\/)?(?<domain>[^\/\s]+)(?<path>\/[^\s]*)?$/;
  const match = url.match(urlRegex);

  if (match && match.groups) {
    return {
      protocol: match.groups.protocol || '',
      domain: match.groups.domain || '',
      path: match.groups.path || ''
    };
  }

  return null;
}

console.log(parseURL('https://www.example.com/path/page.html'));
// { protocol: "https", domain: "www.example.com", path: "/path/page.html" }

// æ€§èƒ½æ¯”è¾ƒï¼šå‘½åæ•è·ç»„ vs ç´¢å¼•æ•è·ç»„
const url = 'https://www.example.com/path/page.html';

console.time('ç´¢å¼•æ•è·ç»„');
for (let i = 0; i < 100000; i++) {
  /^(?:(\w+):\/\/)?([^\/\s]+)(\/[^\s]*)?$/.exec(url);
}
console.timeEnd('ç´¢å¼•æ•è·ç»„');

console.time('å‘½åæ•è·ç»„');
for (let i = 0; i < 100000; i++) {
  /^(?:(?<protocol>\w+):\/\/)?(?<domain>[^\/\s]+)(?<path>\/[^\s]*)?$/.exec(url);
}
console.timeEnd('å‘½åæ•è·ç»„');
// ç´¢å¼•æ•è·ç»„é€šå¸¸æ¯”å‘½åæ•è·ç»„æ€§èƒ½ç•¥å¥½ï¼Œä½†å‘½åæ•è·ç»„å¯è¯»æ€§æ›´å¼º
```

| è¡¨è¾¾å¼ | æè¿° |
|-------|------|
| `(pattern)` | æ•è·ç»„ï¼ŒåŒ¹é…æ‹¬å·å†…çš„è¡¨è¾¾å¼å¹¶å°†å…¶ä½œä¸ºä¸€ä¸ªç»„ |
| `(?:pattern)` | éæ•è·ç»„ï¼ŒåŒ¹é…æ‹¬å·å†…çš„è¡¨è¾¾å¼ä½†ä¸è®°ä½åŒ¹é…é¡¹ |
| `\n` | åœ¨æ­£åˆ™è¡¨è¾¾å¼æˆ–æ›¿æ¢å­—ç¬¦ä¸²ä¸­ï¼Œè¡¨ç¤ºç¬¬nä¸ªæ•è·ç»„ |
| `(?<name>pattern)` | å‘½åæ•è·ç»„ï¼ŒåŒ¹é…æ‹¬å·å†…çš„è¡¨è¾¾å¼å¹¶å°†å…¶ä½œä¸ºä¸€ä¸ªå…·åç»„ |

### è´ªå©ªä¸æƒ°æ€§åŒ¹é…

é»˜è®¤æƒ…å†µä¸‹ï¼Œé‡è¯æ˜¯è´ªå©ªçš„ï¼Œå³å°½å¯èƒ½å¤šåœ°åŒ¹é…å­—ç¬¦ã€‚æƒ°æ€§åŒ¹é…åˆ™å°½å¯èƒ½å°‘åœ°åŒ¹é…å­—ç¬¦ã€‚

```javascript
/**
 * @description æ­£åˆ™è¡¨è¾¾å¼è´ªå©ªä¸æƒ°æ€§åŒ¹é…ç¤ºä¾‹
 */

// è´ªå©ªåŒ¹é…ç¤ºä¾‹
const greedyRegex = /<.+>/;
const htmlStr = '<div>Hello</div>';
console.log(htmlStr.match(greedyRegex));
// ["<div>Hello</div>", index: 0, input: "<div>Hello</div>", groups: undefined]
// è´ªå©ªåŒ¹é…ä¼šåŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œç›´åˆ°æœ€åä¸€ä¸ª>

// æƒ°æ€§åŒ¹é…ç¤ºä¾‹
const lazyRegex = /<.+?>/;
console.log(htmlStr.match(lazyRegex));
// ["<div>", index: 0, input: "<div>Hello</div>", groups: undefined]
// æƒ°æ€§åŒ¹é…ä¼šåœ¨é‡åˆ°ç¬¬ä¸€ä¸ª>æ—¶åœæ­¢

// ä¸åŒé‡è¯çš„è´ªå©ªä¸æƒ°æ€§å¯¹æ¯”
const text = 'aaa';

console.log('* è´ªå©ª:', text.match(/a*/));    // ["aaa", index: 0, input: "aaa", groups: undefined]
console.log('* æƒ°æ€§:', text.match(/a*?/));    // ["", index: 0, input: "aaa", groups: undefined]

console.log('+ è´ªå©ª:', text.match(/a+/));    // ["aaa", index: 0, input: "aaa", groups: undefined]
console.log('+ æƒ°æ€§:', text.match(/a+?/));    // ["a", index: 0, input: "aaa", groups: undefined]

console.log('? è´ªå©ª:', text.match(/a?/));    // ["a", index: 0, input: "aaa", groups: undefined]
console.log('? æƒ°æ€§:', text.match(/a??/));    // ["", index: 0, input: "aaa", groups: undefined]

// è´ªå©ªåŒ¹é…å…¨å±€æ¨¡å¼
console.log('å…¨å±€è´ªå©ª:', text.match(/a*/g));  // ["aaa", "", ""]
console.log('å…¨å±€æƒ°æ€§:', text.match(/a*?/g)); // ["", "", "", ""]

// å®é™…åº”ç”¨ï¼šæå–HTMLæ ‡ç­¾
function extractHtmlTags(html) {
  // è´ªå©ªåŒ¹é…ä¼šå¯¼è‡´é”™è¯¯çš„ç»“æœ
  const greedyTags = html.match(/<.+>/g);

  // æƒ°æ€§åŒ¹é…èƒ½å¤Ÿæ­£ç¡®æå–æ¯ä¸ªæ ‡ç­¾
  const lazyTags = html.match(/<.+?>/g);

  return {
    greedy: greedyTags,
    lazy: lazyTags
  };
}

const complexHtml = '<div><p>Paragraph</p><span>Text</span></div>';
const extractedTags = extractHtmlTags(complexHtml);

console.log('è´ªå©ªåŒ¹é…ç»“æœ:', extractedTags.greedy);
// ["<div><p>Paragraph</p><span>Text</span></div>"]

console.log('æƒ°æ€§åŒ¹é…ç»“æœ:', extractedTags.lazy);
// ["<div>", "<p>", "</p>", "<span>", "</span>", "</div>"]

// æ€§èƒ½æ¯”è¾ƒ
const longHtml = '<div>' + 'a'.repeat(10000) + '</div>';

console.time('è´ªå©ªåŒ¹é…');
/<.+>/.test(longHtml);
console.timeEnd('è´ªå©ªåŒ¹é…');

console.time('æƒ°æ€§åŒ¹é…');
/<.+?>/.test(longHtml);
console.timeEnd('æƒ°æ€§åŒ¹é…');
// åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæƒ°æ€§åŒ¹é…å¯èƒ½æ¯”è´ªå©ªåŒ¹é…æ€§èƒ½æ›´å¥½ï¼Œå°¤å…¶æ˜¯å¤„ç†å¤§æ–‡æœ¬æ—¶
```

### å‰ç»ä¸åé¡¾

å‰ç»å’Œåé¡¾æ–­è¨€ç”¨äºåŒ¹é…æ»¡è¶³ç‰¹å®šæ¡ä»¶ä½†åˆä¸æ¶ˆè€—å­—ç¬¦çš„æ¨¡å¼ã€‚

```javascript
/**
 * @description æ­£åˆ™è¡¨è¾¾å¼å‰ç»ä¸åé¡¾ç¤ºä¾‹
 */

// X(?=Y) å‰ç»(lookahead)ï¼ŒåŒ¹é…Xä»…å½“Xåé¢è·Ÿç€Y
const positiveAhead = /\d+(?=px)/g;
console.log('10px 20em 30px'.match(positiveAhead));
// ["10", "30"]  åŒ¹é…æ•°å­—ï¼Œä½†åªæœ‰å½“åé¢è·Ÿç€"px"æ—¶

// X(?!Y) è´Ÿå‰ç»(negative lookahead)ï¼ŒåŒ¹é…Xä»…å½“Xåé¢ä¸è·ŸY
const negativeAhead = /\d+(?!px)/g;
console.log('10px 20em 30px'.match(negativeAhead));
// ["20"]  åŒ¹é…æ•°å­—ï¼Œä½†åªæœ‰å½“åé¢ä¸è·Ÿç€"px"æ—¶

// (?<=Y)X åé¡¾(lookbehind)ï¼ŒåŒ¹é…Xä»…å½“Xå‰é¢æ˜¯Y (ES2018+)
const positiveBehind = /(?<=\$)\d+/g;
console.log('$10 â‚¬20 $30'.match(positiveBehind));
// ["10", "30"]  åŒ¹é…æ•°å­—ï¼Œä½†åªæœ‰å½“å‰é¢æ˜¯"$"æ—¶

// (?<!Y)X è´Ÿåé¡¾(negative lookbehind)ï¼ŒåŒ¹é…Xä»…å½“Xå‰é¢ä¸æ˜¯Y (ES2018+)
const negativeBehind = /(?<!\$)\d+/g;
console.log('$10 â‚¬20 $30'.match(negativeBehind));
// ["20"]  åŒ¹é…æ•°å­—ï¼Œä½†åªæœ‰å½“å‰é¢ä¸æ˜¯"$"æ—¶

// ç»„åˆä½¿ç”¨å‰ç»å’Œåé¡¾
const combined = /(?<=\$)(\d+)(?=\.\d{2})/g;
console.log('$10.99 $20.50 â‚¬30.25'.match(combined));
// ["10", "20"]  åŒ¹é…ç¾å…ƒé‡‘é¢çš„æ•´æ•°éƒ¨åˆ†

// å®é™…åº”ç”¨ï¼šå¯†ç å¼ºåº¦æ£€æŸ¥
function checkPasswordStrength(password) {
  const hasLowerCase = /[a-z]/.test(password);
  const hasUpperCase = /[A-Z]/.test(password);
  const hasDigit = /\d/.test(password);
  const hasSpecialChar = /[^\w\s]/.test(password);

  // ä½¿ç”¨å‰ç»æ–­è¨€æ£€æŸ¥æ˜¯å¦åŒ…å«è‡³å°‘ä¸€ä¸ªæ•°å­—åé¢ä¸è·Ÿå­—æ¯
  const hasDigitNotFollowedByLetter = /\d(?![a-zA-Z])/.test(password);

  // ä½¿ç”¨åé¡¾æ–­è¨€æ£€æŸ¥æ˜¯å¦åŒ…å«å¤§å†™å­—æ¯å‰é¢æœ‰å°å†™å­—æ¯
  const hasUpperAfterLower = /(?<=[a-z])[A-Z]/.test(password);

  return {
    hasLowerCase,
    hasUpperCase,
    hasDigit,
    hasSpecialChar,
    hasDigitNotFollowedByLetter,
    hasUpperAfterLower,
    strength: hasLowerCase + hasUpperCase + hasDigit + hasSpecialChar
  };
}

console.log(checkPasswordStrength('Passw0rd!'));
/* è¾“å‡º:
{
  hasLowerCase: true,
  hasUpperCase: true,
  hasDigit: true,
  hasSpecialChar: true,
  hasDigitNotFollowedByLetter: false,
  hasUpperAfterLower: true,
  strength: 4
}
*/

// æ€§èƒ½è€ƒè™‘ï¼šæ–­è¨€é€šå¸¸æ¯”æ•è·ç»„æ›´é«˜æ•ˆ
const text = 'abc123def';

console.time('ä½¿ç”¨æ•è·ç»„');
for (let i = 0; i < 100000; i++) {
  const match = text.match(/([a-z]+)(\d+)/);
  const letters = match[1];
  const numbers = match[2];
}
console.timeEnd('ä½¿ç”¨æ•è·ç»„');

console.time('ä½¿ç”¨å‰ç»æ–­è¨€');
for (let i = 0; i < 100000; i++) {
  const letters = text.match(/[a-z]+(?=\d+)/)[0];
  const numbers = text.match(/(?<=[a-z]+)\d+/)[0];
}
console.timeEnd('ä½¿ç”¨å‰ç»æ–­è¨€');
// åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä½¿ç”¨æ–­è¨€å¯èƒ½ä¼šæœ‰æ€§èƒ½ä¼˜åŠ¿
```

| è¡¨è¾¾å¼ | æè¿° |
|-------|------|
| `X(?=Y)` | å‰ç»(lookahead)ï¼ŒåŒ¹é…Xä»…å½“Xåé¢è·Ÿç€Y |
| `X(?!Y)` | è´Ÿå‰ç»(negative lookahead)ï¼ŒåŒ¹é…Xä»…å½“Xåé¢ä¸è·ŸY |
| `(?<=Y)X` | åé¡¾(lookbehind)ï¼ŒåŒ¹é…Xä»…å½“Xå‰é¢æ˜¯Y |
| `(?<!Y)X` | è´Ÿåé¡¾(negative lookbehind)ï¼ŒåŒ¹é…Xä»…å½“Xå‰é¢ä¸æ˜¯Y |
```

## JavaScriptä¸­çš„æ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•

JavaScriptæä¾›äº†ä¸¤ç±»æ–¹æ³•æ¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼šRegExpå¯¹è±¡æ–¹æ³•å’ŒStringå¯¹è±¡æ–¹æ³•ã€‚

### RegExpå¯¹è±¡æ–¹æ³•

```javascript
/**
 * @description RegExp.prototype.test() - æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼ä¸å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…
 * @param {string} str - è¦æµ‹è¯•çš„å­—ç¬¦ä¸²
 * @return {boolean} å¦‚æœæ‰¾åˆ°åŒ¹é…åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›false
 */
function testMethod() {
  const regex = /hello/i;

  // åŸºæœ¬ç”¨æ³•
  console.log(regex.test("Hello World"));  // true
  console.log(regex.test("Hi World"));     // false

  // å…¨å±€æ¨¡å¼ä¸‹çš„testæ–¹æ³•ä¼šè®°ä½ä¸Šæ¬¡åŒ¹é…ä½ç½®
  const globalRegex = /a/g;
  const str = "ababa";

  console.log(globalRegex.test(str));  // trueï¼ŒåŒ¹é…ç¬¬1ä¸ª'a'
  console.log(globalRegex.lastIndex);  // 1ï¼Œä¸‹ä¸€æ¬¡æœç´¢çš„èµ·å§‹ä½ç½®

  console.log(globalRegex.test(str));  // trueï¼ŒåŒ¹é…ç¬¬3ä¸ª'a'
  console.log(globalRegex.lastIndex);  // 3

  console.log(globalRegex.test(str));  // trueï¼ŒåŒ¹é…ç¬¬5ä¸ª'a'
  console.log(globalRegex.lastIndex);  // 5

  console.log(globalRegex.test(str));  // falseï¼Œæ²¡æœ‰æ›´å¤šåŒ¹é…
  console.log(globalRegex.lastIndex);  // 0ï¼Œé‡ç½®ä¸º0

  // æ³¨æ„ï¼šè¿ç»­è°ƒç”¨test()å¯èƒ½ä¼šå¯¼è‡´æ„å¤–ç»“æœ
  // é‡ç½®lastIndex
  globalRegex.lastIndex = 0;
}

testMethod();

/**
 * @description RegExp.prototype.exec() - åœ¨å­—ç¬¦ä¸²ä¸­æ‰§è¡ŒåŒ¹é…
 * @param {string} str - è¦æœç´¢çš„å­—ç¬¦ä¸²
 * @return {Array|null} è¿”å›åŒ¹é…å¯¹è±¡æ•°ç»„æˆ–null
 */
function execMethod() {
  // åŸºæœ¬ç”¨æ³• - æ•è·ç»„
  const regex = /(\w+)\s(\w+)/;
  const str = "John Doe";
  const match = regex.exec(str);

  console.log(match);
  // ["John Doe", "John", "Doe", index: 0, input: "John Doe", groups: undefined]

  console.log(match[0]);      // "John Doe" - å®Œæ•´åŒ¹é…
  console.log(match[1]);      // "John" - ç¬¬ä¸€ä¸ªæ•è·ç»„
  console.log(match[2]);      // "Doe" - ç¬¬äºŒä¸ªæ•è·ç»„
  console.log(match.index);   // 0 - åŒ¹é…å¼€å§‹çš„ä½ç½®
  console.log(match.input);   // "John Doe" - åŸå§‹å­—ç¬¦ä¸²

  // å…¨å±€æ¨¡å¼ä¸‹çš„execä¹Ÿä¼šè®°ä½ä¸Šæ¬¡åŒ¹é…ä½ç½®
  const globalRegex = /(\d+)/g;
  const numbers = "123 456 789";

  let result;
  while ((result = globalRegex.exec(numbers)) !== null) {
    console.log(`æ‰¾åˆ° ${result[0]} åœ¨ä½ç½® ${result.index}`);
  }
  // æ‰¾åˆ° 123 åœ¨ä½ç½® 0
  // æ‰¾åˆ° 456 åœ¨ä½ç½® 4
  // æ‰¾åˆ° 789 åœ¨ä½ç½® 8

  // å‘½åæ•è·ç»„ (ES2018+)
  const namedRegex = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/;
  const date = "2023-05-15";
  const dateMatch = namedRegex.exec(date);

  console.log(dateMatch.groups);              // {year: "2023", month: "05", day: "15"}
  console.log(dateMatch.groups.year);         // "2023"
  console.log(dateMatch.groups.month);        // "05"
  console.log(dateMatch.groups.day);          // "15"

  // æ€§èƒ½æ¯”è¾ƒï¼štest vs exec
  const simpleRegex = /\d+/;
  const testStr = "abc123def";

  console.time('testæ–¹æ³•');
  for (let i = 0; i < 1000000; i++) {
    simpleRegex.test(testStr);
  }
  console.timeEnd('testæ–¹æ³•');

  console.time('execæ–¹æ³•');
  for (let i = 0; i < 1000000; i++) {
    simpleRegex.exec(testStr);
  }
  console.timeEnd('execæ–¹æ³•');
  // testæ–¹æ³•é€šå¸¸æ¯”execæ–¹æ³•å¿«ï¼Œå› ä¸ºå®ƒåªè¿”å›å¸ƒå°”å€¼è€Œä¸æ„å»ºåŒ¹é…æ•°ç»„
}

execMethod();
```

### Stringå¯¹è±¡æ–¹æ³•

```javascript
/**
 * @description String.prototype.match() - è¿”å›æ­£åˆ™è¡¨è¾¾å¼åœ¨å­—ç¬¦ä¸²ä¸­çš„åŒ¹é…é¡¹
 * @param {RegExp} regexp - æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡
 * @return {Array|null} åŒ¹é…ç»“æœæ•°ç»„æˆ–null
 */
function matchMethod() {
  // åŸºæœ¬ç”¨æ³•
  const str = "The rain in SPAIN stays mainly in the plain";

  // ä¸ä½¿ç”¨gæ ‡å¿—ï¼Œè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹åŠè¯¦ç»†ä¿¡æ¯
  const match1 = str.match(/ain/);
  console.log(match1);
  // ["ain", index: 5, input: "The rain in SPAIN stays mainly in the plain", groups: undefined]

  // ä½¿ç”¨gæ ‡å¿—ï¼Œè¿”å›æ‰€æœ‰åŒ¹é…é¡¹çš„æ•°ç»„
  const match2 = str.match(/ain/g);
  console.log(match2);
  // ["ain", "ain", "ain", "ain"]

  // ä½¿ç”¨iæ ‡å¿—ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰
  const match3 = str.match(/ain/gi);
  console.log(match3);
  // ["ain", "AIN", "ain", "ain"]

  // æ²¡æœ‰åŒ¹é…æ—¶è¿”å›null
  const noMatch = "hello".match(/world/);
  console.log(noMatch);  // null

  // æ•è·ç»„
  const sentence = "JavaScript is awesome";
  const wordMatch = sentence.match(/(\w+)\s(is)\s(\w+)/);

  console.log(wordMatch);
  // ["JavaScript is awesome", "JavaScript", "is", "awesome", index: 0, ...]

  // String.matchä¸RegExp.execå¯¹æ¯”
  const globalRegex = /a(b)/g;
  const text = "ab abc abcd";

  // matchè¿”å›æ‰€æœ‰åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œä¸åŒ…æ‹¬æ•è·ç»„ä¿¡æ¯
  console.log(text.match(globalRegex));
  // ["ab", "ab", "ab"]

  // ä½¿ç”¨execå’Œå¾ªç¯æ¥è·å–æ•è·ç»„ä¿¡æ¯
  let execResult;
  const allMatches = [];
  while ((execResult = globalRegex.exec(text)) !== null) {
    allMatches.push({
      full: execResult[0],
      group: execResult[1],
      index: execResult.index
    });
  }

  console.log(allMatches);
  // [
  //   { full: "ab", group: "b", index: 0 },
  //   { full: "ab", group: "b", index: 3 },
  //   { full: "ab", group: "b", index: 7 }
  // ]
}

matchMethod();

/**
 * @description String.prototype.matchAll() - è¿”å›åŒ…å«æ‰€æœ‰åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç»“æœçš„è¿­ä»£å™¨
 * @param {RegExp} regexp - å¿…é¡»æ˜¯è®¾ç½®äº†gæ ‡å¿—çš„æ­£åˆ™è¡¨è¾¾å¼
 * @return {Iterator} åŒ¹é…ç»“æœçš„è¿­ä»£å™¨
 */
function matchAllMethod() {
  // matchAllå¿…é¡»ä½¿ç”¨å¸¦æœ‰gæ ‡å¿—çš„æ­£åˆ™è¡¨è¾¾å¼
  const regex = /t(e)(st(\d?))/g;
  const str = "test1test2";

  // ä½¿ç”¨å±•å¼€è¯­æ³•å°†è¿­ä»£å™¨è½¬æ¢ä¸ºæ•°ç»„
  const matches = [...str.matchAll(regex)];

  console.log(matches);
  // [
  //   ["test1", "e", "st1", "1", index: 0, input: "test1test2", groups: undefined],
  //   ["test2", "e", "st2", "2", index: 5, input: "test1test2", groups: undefined]
  // ]

  // ä½¿ç”¨for...oféå†åŒ¹é…ç»“æœ
  for (const match of str.matchAll(regex)) {
    console.log(`å®Œæ•´åŒ¹é…: ${match[0]}`);
    console.log(`ç¬¬1ä¸ªæ•è·ç»„: ${match[1]}`);
    console.log(`ç¬¬2ä¸ªæ•è·ç»„: ${match[2]}`);
    console.log(`ç¬¬3ä¸ªæ•è·ç»„: ${match[3]}`);
    console.log(`åŒ¹é…ä½ç½®: ${match.index}`);
    console.log('---');
  }

  // å‘½åæ•è·ç»„ä¸matchAll
  const dateRegex = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/g;
  const dates = "Meeting on 2023-05-15 and deadline on 2023-06-30";

  for (const match of dates.matchAll(dateRegex)) {
    const { year, month, day } = match.groups;
    console.log(`å¹´: ${year}, æœˆ: ${month}, æ—¥: ${day}`);
  }
  // å¹´: 2023, æœˆ: 05, æ—¥: 15
  // å¹´: 2023, æœˆ: 06, æ—¥: 30

  // matchAllä¸execå¾ªç¯çš„åŒºåˆ«
  // matchAllåˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œä¸ä¿®æ”¹æ­£åˆ™è¡¨è¾¾å¼çš„lastIndex
  const globalRegex = /\b(\w+)\b/g;
  const text = "Hello world JavaScript";

  // ä½¿ç”¨execå¾ªç¯
  const execResults = [];
  let execMatch;
  while ((execMatch = globalRegex.exec(text)) !== null) {
    execResults.push(execMatch[0]);
  }

  // é‡ç½®lastIndex
  globalRegex.lastIndex = 0;

  // ä½¿ç”¨matchAll
  const matchAllResults = [...text.matchAll(globalRegex)].map(m => m[0]);

  console.log('execç»“æœ:', execResults);
  // execç»“æœ: ["Hello", "world", "JavaScript"]
  console.log('matchAllç»“æœ:', matchAllResults);
  // matchAllç»“æœ: ["Hello", "world", "JavaScript"]
}

matchAllMethod();

/**
 * @description String.prototype.replace() - æ›¿æ¢åŒ¹é…çš„å­å­—ç¬¦ä¸²
 * @param {RegExp|string} pattern - æ­£åˆ™è¡¨è¾¾å¼æˆ–å­—ç¬¦ä¸²
 * @param {string|Function} replacement - æ›¿æ¢å­—ç¬¦ä¸²æˆ–å‡½æ•°
 * @return {string} æ›¿æ¢åçš„æ–°å­—ç¬¦ä¸²
 */
function replaceMethod() {
  // åŸºæœ¬ç”¨æ³• - æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…
  const str = "Hello world!";
  const result = str.replace(/Hello/i, "Hi");
  console.log(result);  // "Hi world!"

  // ä½¿ç”¨gæ ‡å¿—æ›¿æ¢æ‰€æœ‰åŒ¹é…
  const str2 = "apple, orange, apple, banana";
  const result2 = str2.replace(/apple/g, "pear");
  console.log(result2);  // "pear, orange, pear, banana"

  // ä½¿ç”¨æ•è·ç»„å¼•ç”¨
  const name = "John Smith";
  const swapped = name.replace(/(\w+)\s(\w+)/, "$2, $1");
  console.log(swapped);  // "Smith, John"

  // ä½¿ç”¨å‘½åæ•è·ç»„å¼•ç”¨
  const nameWithNamed = name.replace(/(?<first>\w+)\s(?<last>\w+)/, "$<last>, $<first>");
  console.log(nameWithNamed);  // "Smith, John"

  // ä½¿ç”¨å‡½æ•°ä½œä¸ºæ›¿æ¢å‚æ•°
  const fruits = "apple, orange, APPLE, banana";

  // æ›¿æ¢ä¸ºå¤§å†™
  const upperCaseFruits = fruits.replace(/\b[a-z]+\b/g, match => match.toUpperCase());
  console.log(upperCaseFruits);  // "APPLE, ORANGE, APPLE, BANANA"

  // æ›¿æ¢å¹¶æ·»åŠ ç´¢å¼•
  const indexedFruits = fruits.replace(/\b[a-zA-Z]+\b/g, (match, offset) => {
    return `${match}(${offset})`;
  });
  console.log(indexedFruits);  // "apple(0), orange(7), APPLE(15), banana(22)"

  // ä½¿ç”¨æ•è·ç»„å’Œæ›¿æ¢å‡½æ•°
  const dates = "2023-05-15 and 2023-06-30";
  const formattedDates = dates.replace(/(\d{4})-(\d{2})-(\d{2})/g, (match, year, month, day) => {
    return `${day}/${month}/${year}`;
  });
  console.log(formattedDates);  // "15/05/2023 and 30/06/2023"

  // ä½¿ç”¨å‘½åæ•è·ç»„å’Œæ›¿æ¢å‡½æ•°
  const namedFormattedDates = dates.replace(/(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/g,
    (match, _p1, _p2, _p3, _offset, _string, groups) => {
      return `${groups.day}/${groups.month}/${groups.year}`;
    }
  );
  console.log(namedFormattedDates);  // "15/05/2023 and 30/06/2023"
}

replaceMethod();

/**
 * @description String.prototype.replaceAll() - æ›¿æ¢æ‰€æœ‰åŒ¹é…çš„å­å­—ç¬¦ä¸²
 * @param {RegExp|string} pattern - æ­£åˆ™è¡¨è¾¾å¼å¿…é¡»å¸¦æœ‰gæ ‡å¿—
 * @param {string|Function} replacement - æ›¿æ¢å­—ç¬¦ä¸²æˆ–å‡½æ•°
 * @return {string} æ›¿æ¢åçš„æ–°å­—ç¬¦ä¸²
 */
function replaceAllMethod() {
  // ä½¿ç”¨å­—ç¬¦ä¸²æ¨¡å¼ï¼ˆä¸éœ€è¦gæ ‡å¿—ï¼‰
  const str = "Hello World, hello people";
  const result = str.replaceAll("hello", "Hi");
  console.log(result);  // "Hello World, Hi people"

  // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ˆå¿…é¡»æœ‰gæ ‡å¿—ï¼‰
  const regexResult = str.replaceAll(/hello/gi, "Hi");
  console.log(regexResult);  // "Hi World, Hi people"

  // ä½¿ç”¨æ›¿æ¢å‡½æ•°
  const numbers = "12px 16px 20px";
  const doubled = numbers.replaceAll(/(\d+)px/g, (match, p1) => `${p1 * 2}px`);
  console.log(doubled);  // "24px 32px 40px"

  // replaceAll vs replace+gçš„åŒºåˆ«
  // å®ƒä»¬ä¸»è¦åŒºåˆ«åœ¨äºå½“ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°æ—¶:
  const withReplace = "one-two-one".replace("one", "1");     // "1-two-one"
  const withReplaceG = "one-two-one".replace(/one/g, "1");   // "1-two-1"
  const withReplaceAll = "one-two-one".replaceAll("one", "1"); // "1-two-1"

  console.log(withReplace);
  console.log(withReplaceG);
  console.log(withReplaceAll);

  // æ€§èƒ½æ¯”è¾ƒ
  const longText = "test ".repeat(10000);

  console.time('replace+g');
  longText.replace(/test/g, "TEST");
  console.timeEnd('replace+g');

  console.time('replaceAllå­—ç¬¦ä¸²');
  longText.replaceAll("test", "TEST");
  console.timeEnd('replaceAllå­—ç¬¦ä¸²');

  console.time('replaceAllæ­£åˆ™');
  longText.replaceAll(/test/g, "TEST");
  console.timeEnd('replaceAllæ­£åˆ™');
  // replaceAllåœ¨å¤„ç†å¤§é‡æ–‡æœ¬æ—¶å¯èƒ½æ›´é«˜æ•ˆï¼Œå°¤å…¶æ˜¯ä½¿ç”¨å­—ç¬¦ä¸²æ¨¡å¼æ—¶
}

replaceAllMethod();

/**
 * @description String.prototype.search() - æœç´¢åŒ¹é…é¡¹ï¼Œè¿”å›é¦–æ¬¡åŒ¹é…ä½ç½®çš„ç´¢å¼•
 * @param {RegExp} regexp - æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡
 * @return {number} åŒ¹é…çš„ç´¢å¼•ï¼Œå¦‚æœæœªæ‰¾åˆ°åŒ¹é…åˆ™è¿”å›-1
 */
function searchMethod() {
  // åŸºæœ¬ç”¨æ³•
  const str = "Hello world!";
  const index = str.search(/world/i);
  console.log(index);  // 6

  // ä¸åŒ¹é…æ—¶è¿”å›-1
  const notFound = str.search(/universe/);
  console.log(notFound);  // -1

  // searchå¿½ç•¥gæ ‡å¿—ï¼Œå§‹ç»ˆè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…
  const multiStr = "apple banana apple";
  console.log(multiStr.search(/apple/));   // 0
  console.log(multiStr.search(/apple/g));  // 0 (ä¸æ²¡æœ‰gæ ‡å¿—ç›¸åŒ)

  // search vs indexOf:
  // searchå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ŒindexOfåªèƒ½ä½¿ç”¨å­—ç¬¦ä¸²
  console.log(str.search(/wo.ld/));        // 6
  console.log(str.indexOf("wo.ld"));       // -1 (å­—é¢åŒ¹é…)

  // æ€§èƒ½æ¯”è¾ƒ
  const longText = "This is a long text. " + "a".repeat(10000) + " target";
  const simplePattern = "target";
  const regexPattern = /target/;

  console.time('indexOf');
  longText.indexOf(simplePattern);
  console.timeEnd('indexOf');

  console.time('search');
  longText.search(regexPattern);
  console.timeEnd('search');
  // å¯¹äºç®€å•å­—ç¬¦ä¸²åŒ¹é…ï¼ŒindexOfé€šå¸¸æ¯”searchå¿«
}

searchMethod();

/**
 * @description String.prototype.split() - ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åˆ†å‰²å­—ç¬¦ä¸²
 * @param {RegExp|string} separator - åˆ†éš”ç¬¦
 * @param {number} limit - é™åˆ¶ç»“æœæ•°ç»„çš„é•¿åº¦
 * @return {Array} åˆ†å‰²åçš„å­—ç¬¦ä¸²æ•°ç»„
 */
function splitMethod() {
  // åŸºæœ¬ç”¨æ³• - æŒ‰ç©ºç™½å­—ç¬¦åˆ†å‰²
  const str = "The rain in SPAIN stays mainly in the plain";
  const words = str.split(/\s+/);
  console.log(words);
  // ["The", "rain", "in", "SPAIN", "stays", "mainly", "in", "the", "plain"]

  // ä½¿ç”¨é™åˆ¶å‚æ•°
  const limitedWords = str.split(/\s+/, 3);
  console.log(limitedWords);
  // ["The", "rain", "in"]

  // æ•è·æ‹¬å·å°†åŒ…å«åœ¨ç»“æœä¸­
  const withGroups = str.split(/(\s+)/);
  console.log(withGroups);
  // ["The", " ", "rain", " ", "in", " ", "SPAIN", ...]

  // å¸¸è§ç”¨ä¾‹ - è§£æCSV
  const csvLine = "John,Doe,30,\"New York, NY\"";

  // ä¸æ­£ç¡®çš„åˆ†å‰²æ–¹å¼ï¼ˆä¸å¤„ç†å¼•å·ä¸­çš„é€—å·ï¼‰
  const badSplit = csvLine.split(',');
  console.log(badSplit);
  // ["John", "Doe", "30", "\"New York", " NY\""]

  // æ­£ç¡®çš„åˆ†å‰²æ–¹å¼ï¼ˆå¤„ç†å¼•å·ä¸­çš„é€—å·ï¼‰
  function parseCSV(text) {
    // åŒ¹é…CSVå­—æ®µï¼šæœªå¼•ç”¨å­—æ®µæˆ–å¼•ç”¨å­—æ®µ
    const regex = /(?:^|,)(?:"([^"]*(?:""[^"]*)*)"|([^,]*))/g;
    const result = [];
    let match;

    while ((match = regex.exec(text)) !== null) {
      // æ•è·ç»„1åŒ…å«å¼•ç”¨å€¼ï¼Œæ•è·ç»„2åŒ…å«éå¼•ç”¨å€¼
      const field = match[1] !== undefined
        ? match[1].replace(/""/g, '"')  // å¤„ç†åŒå¼•å·è½¬ä¹‰
        : match[2];
      result.push(field);
    }

    return result;
  }

  console.log(parseCSV(csvLine));
  // ["John", "Doe", "30", "New York, NY"]

  // æ€§èƒ½æ¯”è¾ƒï¼šsplit vs æ‰‹åŠ¨å¤„ç†
  const longText = "word1,word2,word3,".repeat(1000);

  console.time('split');
  longText.split(',');
  console.timeEnd('split');

  console.time('æ‰‹åŠ¨å¾ªç¯');
  const result = [];
  let current = '';
  for (let i = 0; i < longText.length; i++) {
    if (longText[i] === ',') {
      result.push(current);
      current = '';
    } else {
      current += longText[i];
    }
  }
  if (current) result.push(current);
  console.timeEnd('æ‰‹åŠ¨å¾ªç¯');
  // å†…ç½®çš„splitæ–¹æ³•é€šå¸¸æ¯”æ‰‹åŠ¨å®ç°æ›´é«˜æ•ˆ
}

splitMethod();
```

## å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼ç¤ºä¾‹

ä¸‹é¢ä»‹ç»ä¸€äº›åœ¨å‰ç«¯å¼€å‘ä¸­å¸¸è§çš„æ­£åˆ™è¡¨è¾¾å¼åº”ç”¨åœºæ™¯å’Œå®ç°æ–¹å¼ã€‚

### 1. éªŒè¯ç”µå­é‚®ä»¶åœ°å€

```javascript
/**
 * @description ç”µå­é‚®ä»¶åœ°å€éªŒè¯æ­£åˆ™è¡¨è¾¾å¼
 * åŒ¹é…æ ¼å¼: username@domain.tld
 */
function validateEmail() {
  // åŸºæœ¬ç‰ˆé‚®ç®±æ­£åˆ™ - ç®€å•ä½†è¦†ç›–å¤§éƒ¨åˆ†å¸¸è§æƒ…å†µ
  const simpleEmailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

  // æ›´å¤æ‚çš„é‚®ç®±æ­£åˆ™ - ç¬¦åˆRFC 5322æ ‡å‡†
  const complexEmailRegex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

  // æµ‹è¯•ç”¨ä¾‹
  const emails = [
    "user@example.com",         // æœ‰æ•ˆ
    "user.name@example.co.uk",  // æœ‰æ•ˆ
    "user+tag@example.com",     // æœ‰æ•ˆï¼ˆ+æ ‡ç­¾å¸¸ç”¨äºGmailï¼‰
    "user@localhost",           // ç®€å•ç‰ˆæ— æ•ˆï¼Œå¤æ‚ç‰ˆæœ‰æ•ˆ
    "user@example",             // æ— æ•ˆï¼ˆç¼ºå°‘é¡¶çº§åŸŸåï¼‰
    "user@.com",                // æ— æ•ˆ
    "user@example..com",        // æ— æ•ˆï¼ˆè¿ç»­ç‚¹ï¼‰
    "@example.com",             // æ— æ•ˆï¼ˆç¼ºå°‘ç”¨æˆ·åï¼‰
    "user@",                    // æ— æ•ˆ
    "user.example.com",         // æ— æ•ˆï¼ˆç¼ºå°‘@ï¼‰
    "user name@example.com"     // æ— æ•ˆï¼ˆåŒ…å«ç©ºæ ¼ï¼‰
  ];

  console.log("=== ç®€å•ç‰ˆé‚®ç®±éªŒè¯ ===");
  emails.forEach(email => {
    console.log(`${email}: ${simpleEmailRegex.test(email)}`);
  });

  console.log("\n=== å¤æ‚ç‰ˆé‚®ç®±éªŒè¯ ===");
  emails.forEach(email => {
    console.log(`${email}: ${complexEmailRegex.test(email)}`);
  });

  // å®é™…åº”ç”¨ï¼šè¡¨å•éªŒè¯
  function validateEmailField(email) {
    const isValid = simpleEmailRegex.test(email);

    if (!isValid) {
      return {
        valid: false,
        message: 'è¯·è¾“å…¥æœ‰æ•ˆçš„ç”µå­é‚®ä»¶åœ°å€'
      };
    }

    return { valid: true };
  }

  // æµ‹è¯•è¡¨å•éªŒè¯
  console.log(validateEmailField("user@example.com"));
  console.log(validateEmailField("invalid-email"));
}

validateEmail();
```

### 2. éªŒè¯æ‰‹æœºå·ç ï¼ˆä¸­å›½å¤§é™†ï¼‰

```javascript
/**
 * @description ä¸­å›½å¤§é™†æ‰‹æœºå·ç éªŒè¯æ­£åˆ™è¡¨è¾¾å¼
 * åŒ¹é…æ ¼å¼: 1å¼€å¤´çš„11ä½æ•°å­—ï¼Œç¬¬äºŒä½ä¸º3-9
 */
function validateChinesePhone() {
  // åŸºæœ¬éªŒè¯ - 1å¼€å¤´çš„11ä½æ•°å­—ï¼Œç¬¬äºŒä½ä¸º3-9
  const phoneRegex = /^1[3-9]\d{9}$/;

  // å¸¦åˆ†éš”ç¬¦çš„ç”µè¯å·ç éªŒè¯ï¼ˆæ”¯æŒç©ºæ ¼ã€è¿å­—ç¬¦æˆ–ç‚¹ä½œä¸ºåˆ†éš”ç¬¦ï¼‰
  const phoneWithSeparatorRegex = /^1[3-9][\d\s.-]{0,}(\d[\d\s.-]{0,}){9}$/;

  // æµ‹è¯•ç”¨ä¾‹
  const phoneNumbers = [
    "13812345678",     // æœ‰æ•ˆ
    "19912345678",     // æœ‰æ•ˆ
    "1381234567",      // æ— æ•ˆï¼ˆä¸è¶³11ä½ï¼‰
    "138123456789",    // æ— æ•ˆï¼ˆè¶…è¿‡11ä½ï¼‰
    "23812345678",     // æ— æ•ˆï¼ˆä¸æ˜¯1å¼€å¤´ï¼‰
    "12812345678",     // æ— æ•ˆï¼ˆç¬¬äºŒä½ä¸æ˜¯3-9ï¼‰
    "138 1234 5678",   // åŸºæœ¬æ­£åˆ™æ— æ•ˆï¼Œå¸¦åˆ†éš”ç¬¦æ­£åˆ™æœ‰æ•ˆ
    "138-1234-5678",   // åŸºæœ¬æ­£åˆ™æ— æ•ˆï¼Œå¸¦åˆ†éš”ç¬¦æ­£åˆ™æœ‰æ•ˆ
    "138.1234.5678"    // åŸºæœ¬æ­£åˆ™æ— æ•ˆï¼Œå¸¦åˆ†éš”ç¬¦æ­£åˆ™æœ‰æ•ˆ
  ];

  console.log("=== åŸºæœ¬æ‰‹æœºå·éªŒè¯ ===");
  phoneNumbers.forEach(phone => {
    console.log(`${phone}: ${phoneRegex.test(phone)}`);
  });

  console.log("\n=== å¸¦åˆ†éš”ç¬¦çš„æ‰‹æœºå·éªŒè¯ ===");
  phoneNumbers.forEach(phone => {
    console.log(`${phone}: ${phoneWithSeparatorRegex.test(phone)}`);
  });

  // æ ¼å¼åŒ–æ‰‹æœºå·ç 
  function formatPhoneNumber(phone) {
    // ç§»é™¤æ‰€æœ‰éæ•°å­—å­—ç¬¦
    const cleaned = phone.replace(/\D/g, '');

    // æ£€æŸ¥æ˜¯å¦æ˜¯æœ‰æ•ˆçš„11ä½æ‰‹æœºå·
    if (phoneRegex.test(cleaned)) {
      // æ ¼å¼åŒ–ä¸º 138 1234 5678
      return cleaned.replace(/(\d{3})(\d{4})(\d{4})/, '$1 $2 $3');
    }

    return phone; // å¦‚æœä¸æ˜¯æœ‰æ•ˆå·ç ï¼Œè¿”å›åŸå§‹è¾“å…¥
  }

  // æµ‹è¯•æ ¼å¼åŒ–
  console.log("\n=== æ ¼å¼åŒ–æ‰‹æœºå· ===");
  console.log(formatPhoneNumber("13812345678"));    // 138 1234 5678
  console.log(formatPhoneNumber("138-1234-5678"));  // 138 1234 5678
  console.log(formatPhoneNumber("invalid"));        // invalid
}

validateChinesePhone();
```

### 3. éªŒè¯URLåœ°å€

```javascript
/**
 * @description URLåœ°å€éªŒè¯æ­£åˆ™è¡¨è¾¾å¼
 * åŒ¹é…æ ¼å¼: æ ‡å‡†HTTP/HTTPS URL
 */
function validateURL() {
  // åŸºæœ¬URLéªŒè¯
  const urlRegex = /^(https?:\/\/)?([a-zA-Z0-9.-]+)\.([a-zA-Z]{2,})(\/[^\s]*)?$/;

  // æ›´å…¨é¢çš„URLéªŒè¯ï¼ˆåŒ…å«ç«¯å£ã€æŸ¥è¯¢å‚æ•°å’Œé”šç‚¹ï¼‰
  const complexUrlRegex = /^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)$/;

  // æµ‹è¯•ç”¨ä¾‹
  const urls = [
    "https://www.example.com",                    // æœ‰æ•ˆ
    "http://example.com",                         // æœ‰æ•ˆ
    "example.com",                                // åŸºæœ¬æ­£åˆ™æœ‰æ•ˆ
    "https://example.com/path/page.html",         // æœ‰æ•ˆ
    "https://example.com/path?query=param#hash",  // åŸºæœ¬æ­£åˆ™å¯èƒ½æ— æ•ˆï¼Œå¤æ‚æ­£åˆ™æœ‰æ•ˆ
    "https://example.com:8080",                   // åŸºæœ¬æ­£åˆ™å¯èƒ½æ— æ•ˆï¼Œå¤æ‚æ­£åˆ™æœ‰æ•ˆ
    "https://sub.example.co.uk",                  // æœ‰æ•ˆ
    "ftp://example.com",                          // æ— æ•ˆï¼ˆä¸æ˜¯http/httpsï¼‰
    "https://example",                            // æ— æ•ˆï¼ˆæ— æœ‰æ•ˆTLDï¼‰
    "https://.com",                               // æ— æ•ˆï¼ˆåŸŸåç¼ºå¤±ï¼‰
    "https://example.123",                        // åŸºæœ¬æ­£åˆ™æ— æ•ˆï¼ˆTLDä¸æ˜¯å­—æ¯ï¼‰
    "invalid url"                                 // æ— æ•ˆ
  ];

  console.log("=== åŸºæœ¬URLéªŒè¯ ===");
  urls.forEach(url => {
    console.log(`${url}: ${urlRegex.test(url)}`);
  });

  console.log("\n=== å¤æ‚URLéªŒè¯ ===");
  urls.forEach(url => {
    console.log(`${url}: ${complexUrlRegex.test(url)}`);
  });

  // URLè§£æå‡½æ•°
  function parseURL(url) {
    // ä½¿ç”¨å‘½åæ•è·ç»„è§£æURLå„éƒ¨åˆ†
    const regex = /^(?:(?<protocol>[a-z]+):\/\/)?(?<domain>[^\/\s]+)(?<path>\/[^\s?#]*)?(?<query>\?[^#\s]*)?(?<hash>#.*)?$/i;
    const match = url.match(regex);

    if (match && match.groups) {
      return {
        protocol: match.groups.protocol || '',
        domain: match.groups.domain || '',
        path: match.groups.path || '',
        query: match.groups.query || '',
        hash: match.groups.hash || ''
      };
    }

    return null;
  }

  // æµ‹è¯•URLè§£æ
  console.log("\n=== URLè§£æ ===");
  console.log(parseURL('https://www.example.com/path/page.html?id=123#section2'));
  // {
  //   protocol: 'https',
  //   domain: 'www.example.com',
  //   path: '/path/page.html',
  //   query: '?id=123',
  //   hash: '#section2'
  // }
}

validateURL();
```

### 4. éªŒè¯èº«ä»½è¯å·ç ï¼ˆä¸­å›½å¤§é™†ï¼Œ18ä½ï¼‰

```javascript
/**
 * @description ä¸­å›½å¤§é™†èº«ä»½è¯å·ç ï¼ˆ18ä½ï¼‰éªŒè¯æ­£åˆ™è¡¨è¾¾å¼
 * åŒ¹é…æ ¼å¼: ç¬¦åˆGB 11643-1999æ ‡å‡†çš„18ä½èº«ä»½è¯å·
 */
function validateIDCard() {
  // åŸºæœ¬èº«ä»½è¯å·ç æ ¼å¼éªŒè¯
  const idCardRegex = /^[1-9]\d{5}(19|20)\d{2}(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i;

  // æµ‹è¯•ç”¨ä¾‹
  const idCards = [
    "440123199001011234",    // æœ‰æ•ˆ
    "44012319900101123X",    // æœ‰æ•ˆ
    "44012319900101123x",    // æœ‰æ•ˆï¼ˆå°å†™xï¼‰
    "140123199002310000",    // æ ¼å¼æœ‰æ•ˆï¼Œä½†å¯èƒ½æ˜¯æ— æ•ˆæ—¥æœŸï¼ˆ2æœˆ31æ—¥ï¼‰
    "440123900101123X",      // æ— æ•ˆï¼ˆå¹´ä»½ä¸ç¬¦åˆ19/20å¼€å¤´ï¼‰
    "44012319901313123X",    // æ— æ•ˆï¼ˆæœˆä»½13ï¼‰
    "440123199001320000",    // æ— æ•ˆï¼ˆæ—¥æœŸ32ï¼‰
    "44012319900101",        // æ— æ•ˆï¼ˆé•¿åº¦ä¸è¶³ï¼‰
    "4401231990010112345",   // æ— æ•ˆï¼ˆé•¿åº¦è¶…å‡ºï¼‰
    "invalid-id"             // æ— æ•ˆ
  ];

  console.log("=== èº«ä»½è¯å·ç éªŒè¯ ===");
  idCards.forEach(id => {
    console.log(`${id}: ${idCardRegex.test(id)}`);
  });

  // å®Œæ•´çš„èº«ä»½è¯å·ç éªŒè¯ï¼ˆåŒ…å«æ ¡éªŒç å’Œæ—¥æœŸæœ‰æ•ˆæ€§æ£€æŸ¥ï¼‰
  function validateChineseIDCard(id) {
    // åŸºæœ¬æ ¼å¼æ£€æŸ¥
    if (!idCardRegex.test(id)) {
      return false;
    }

    // å°†å°å†™xè½¬ä¸ºå¤§å†™X
    id = id.toUpperCase();

    // æ£€æŸ¥æ—¥æœŸæœ‰æ•ˆæ€§
    const year = parseInt(id.substr(6, 4));
    const month = parseInt(id.substr(10, 2));
    const day = parseInt(id.substr(12, 2));

    const date = new Date(year, month - 1, day);
    if (
      date.getFullYear() !== year ||
      date.getMonth() !== month - 1 ||
      date.getDate() !== day
    ) {
      return false;
    }

    // æ ¡éªŒç éªŒè¯
    const coefficients = [7, 9, 10, 5, 8, 4, 2];
    const checkCodeMap = ['1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'];

    let sum = 0;
    for (let i = 0; i < 17; i++) {
      sum += parseInt(id.charAt(i)) * coefficients[i];
    }

    const checkCode = checkCodeMap[sum % 11];
    return checkCode === id.charAt(17);
  }

  // æµ‹è¯•å®Œæ•´éªŒè¯
  console.log("\n=== å®Œæ•´èº«ä»½è¯å·ç éªŒè¯ ===");
  console.log("440123199001011234: " + validateChineseIDCard("440123199001011234"));
  console.log("44012319900229123X: " + validateChineseIDCard("44012319900229123X"));  // 1990å¹´æœ‰2æœˆ29æ—¥
  console.log("44012319910229123X: " + validateChineseIDCard("44012319910229123X"));  // 1991å¹´æ— 2æœˆ29æ—¥ï¼Œè¿”å›false
}

validateIDCard();
```

### 5. éªŒè¯å¼ºå¯†ç ï¼ˆè‡³å°‘8ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦ï¼‰

```javascript
/**
 * @description å¼ºå¯†ç éªŒè¯æ­£åˆ™è¡¨è¾¾å¼
 * è¦æ±‚ï¼šè‡³å°‘8ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦
 */
function validateStrongPassword() {
  // ä½¿ç”¨å‰ç»æ–­è¨€éªŒè¯å¯†ç ç»„åˆè¦æ±‚
  const strongPasswordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^\da-zA-Z]).{8,}$/;

  // ä¸ä½¿ç”¨å‰ç»æ–­è¨€çš„ç®€åŒ–ç‰ˆæœ¬ï¼ˆå¯èƒ½æ€§èƒ½æ›´å¥½ï¼‰
  const alternativePasswordRegex = /^[A-Za-z\d\W_]{8,}$/;

  // æµ‹è¯•ç”¨ä¾‹
  const passwords = [
    "Passw0rd!",         // æœ‰æ•ˆ
    "abcDEF123!",        // æœ‰æ•ˆ
    "Aa1!abcde",         // æœ‰æ•ˆ
    "password",          // æ— æ•ˆï¼ˆç¼ºå°‘å¤§å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦ï¼‰
    "Password",          // æ— æ•ˆï¼ˆç¼ºå°‘æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦ï¼‰
    "Password1",         // æ— æ•ˆï¼ˆç¼ºå°‘ç‰¹æ®Šå­—ç¬¦ï¼‰
    "password!",         // æ— æ•ˆï¼ˆç¼ºå°‘å¤§å†™å­—æ¯å’Œæ•°å­—ï¼‰
    "Pass1!",            // æ— æ•ˆï¼ˆé•¿åº¦ä¸è¶³8ä½ï¼‰
    "PASS1234!",         // æ— æ•ˆï¼ˆç¼ºå°‘å°å†™å­—æ¯ï¼‰
    "pass1234!"          // æ— æ•ˆï¼ˆç¼ºå°‘å¤§å†™å­—æ¯ï¼‰
  ];

  console.log("=== å¼ºå¯†ç éªŒè¯ ===");
  passwords.forEach(password => {
    console.log(`${password}: ${strongPasswordRegex.test(password)}`);
  });

  // å¯†ç å¼ºåº¦æ£€æŸ¥å‡½æ•°
  function checkPasswordStrength(password) {
    const rules = [
      { regex: /.{8,}/, description: "è‡³å°‘8ä¸ªå­—ç¬¦" },
      { regex: /[A-Z]/, description: "è‡³å°‘1ä¸ªå¤§å†™å­—æ¯" },
      { regex: /[a-z]/, description: "è‡³å°‘1ä¸ªå°å†™å­—æ¯" },
      { regex: /\d/, description: "è‡³å°‘1ä¸ªæ•°å­—" },
      { regex: /[^\da-zA-Z]/, description: "è‡³å°‘1ä¸ªç‰¹æ®Šå­—ç¬¦" }
    ];

    // æ£€æŸ¥æ¯æ¡è§„åˆ™
    const result = {
      valid: true,
      failedRules: [],
      strength: 0
    };

    rules.forEach(rule => {
      if (!rule.regex.test(password)) {
        result.valid = false;
        result.failedRules.push(rule.description);
      } else {
        result.strength++;
      }
    });

    // æ·»åŠ å¼ºåº¦è¯„çº§
    if (result.strength <= 2) {
      result.rating = "å¼±";
    } else if (result.strength <= 4) {
      result.rating = "ä¸­";
    } else {
      result.rating = "å¼º";
    }

    return result;
  }

  // æµ‹è¯•å¯†ç å¼ºåº¦æ£€æŸ¥
  console.log("\n=== å¯†ç å¼ºåº¦æ£€æŸ¥ ===");
  console.log("Passw0rd!:", checkPasswordStrength("Passw0rd!"));
  console.log("password:", checkPasswordStrength("password"));
  console.log("Password1:", checkPasswordStrength("Password1"));
}

validateStrongPassword();
```

### 6. æå–HTMLæ ‡ç­¾

```javascript
/**
 * @description HTMLæ ‡ç­¾æå–æ­£åˆ™è¡¨è¾¾å¼
 * åŒ¹é…HTMLæ ‡ç­¾åŠå…¶å±æ€§å’Œå†…å®¹
 */
function extractHtmlTags() {
  const html = "<div class='container'><p>This is a paragraph.</p><span id='highlight'>Important text</span></div>";

  // åŒ¹é…HTMLæ ‡ç­¾ï¼ˆä¸åµŒå¥—ï¼‰
  const simpleTagRegex = /<([a-zA-Z0-9]+)([^>]*)>(.*?)<\/\1>/g;

  // ä»…åŒ¹é…å¼€å§‹æ ‡ç­¾å’Œå±æ€§
  const openTagRegex = /<([a-zA-Z0-9]+)([^>]*)>/g;

  // ä»…æå–æ ‡ç­¾å
  const tagNameRegex = /<\/?([a-zA-Z0-9]+)[^>]*>/g;

  // æå–å±æ€§
  const attributeRegex = /([a-zA-Z0-9-]+)=['"]([^'"]*)['"]/g;

  // ä½¿ç”¨matchAllè·å–æ‰€æœ‰åŒ¹é…çš„æ ‡ç­¾
  console.log("=== æå–HTMLæ ‡ç­¾ï¼ˆä¸åµŒå¥—ï¼‰ ===");
  const matches = [...html.matchAll(simpleTagRegex)];
  matches.forEach(match => {
    console.log("å®Œæ•´åŒ¹é…:", match[0]);
    console.log("æ ‡ç­¾å:", match[1]);
    console.log("å±æ€§:", match[2]);
    console.log("å†…å®¹:", match[3]);
    console.log("---");
  });

  // æå–æ‰€æœ‰å¼€å§‹æ ‡ç­¾
  console.log("\n=== æå–å¼€å§‹æ ‡ç­¾ ===");
  const openTags = [...html.matchAll(openTagRegex)];
  openTags.forEach(match => {
    console.log("æ ‡ç­¾:", match[1], "å±æ€§:", match[2]);
  });

  // æå–æ‰€æœ‰æ ‡ç­¾å
  console.log("\n=== æå–æ‰€æœ‰æ ‡ç­¾å ===");
  const tagMatches = [...html.matchAll(tagNameRegex)];
  tagMatches.forEach(match => {
    console.log(match[0], "->", match[1]);
  });

  // æå–ç‰¹å®šæ ‡ç­¾çš„å±æ€§
  function extractAttributes(tagString) {
    const attributes = {};
    let match;

    while ((match = attributeRegex.exec(tagString)) !== null) {
      attributes[match[1]] = match[2];
    }

    return attributes;
  }

  // æµ‹è¯•æå–å±æ€§
  console.log("\n=== æå–å±æ€§ ===");
  const divTag = "<div class='container' id='main' data-value='123'>";
  console.log(extractAttributes(divTag));
  // { class: 'container', id: 'main', 'data-value': '123' }

  // å®é™…åº”ç”¨ï¼šç®€æ˜“HTMLè§£æå™¨
  function parseHTML(html) {
    const result = [];
    const tagStack = [];

    // åŒ¹é…å¼€å§‹æ ‡ç­¾ã€ç»“æŸæ ‡ç­¾å’Œæ–‡æœ¬å†…å®¹
    const regex = /<([a-zA-Z0-9]+)([^>]*)>|<\/([a-zA-Z0-9]+)>|([^<]+)/g;

    let match;
    while ((match = regex.exec(html)) !== null) {
      if (match[1]) {
        // å¼€å§‹æ ‡ç­¾
        const tag = {
          type: 'tag',
          name: match[1],
          attributes: extractAttributes(match[2]),
          children: []
        };

        if (tagStack.length > 0) {
          tagStack[tagStack.length - 1].children.push(tag);
        } else {
          result.push(tag);
        }

        tagStack.push(tag);
      } else if (match[3]) {
        // ç»“æŸæ ‡ç­¾
        if (tagStack.length > 0 && tagStack[tagStack.length - 1].name === match[3]) {
          tagStack.pop();
        }
      } else if (match[4]) {
        // æ–‡æœ¬å†…å®¹
        const text = match[4].trim();
        if (text && tagStack.length > 0) {
          tagStack[tagStack.length - 1].children.push({
            type: 'text',
            content: text
          });
        }
      }
    }

    return result;
  }

  // æµ‹è¯•HTMLè§£æ
  console.log("\n=== ç®€æ˜“HTMLè§£æ ===");
  const simpleHtml = "<div><p>Hello</p><span>World</span></div>";
  console.log(JSON.stringify(parseHTML(simpleHtml), null, 2));
}

extractHtmlTags();
```

### 7. è§£æURLæŸ¥è¯¢å‚æ•°

```javascript
/**
 * @description URLæŸ¥è¯¢å‚æ•°è§£æå‡½æ•°
 * @param {string} url - è¦è§£æçš„URLå­—ç¬¦ä¸²
 * @return {Object} åŒ…å«æ‰€æœ‰æŸ¥è¯¢å‚æ•°çš„å¯¹è±¡
 */
function getQueryParams(url) {
  const queryString = url.split('?')[1] || '';
  const paramRegex = /([^&=]+)=?([^&]*)/g;
  const params = {};
  let match;

  while ((match = paramRegex.exec(queryString)) !== null) {
    const key = decodeURIComponent(match[1]);
    const value = decodeURIComponent(match[2]);

    // å¤„ç†æ•°ç»„å‚æ•° (ä¾‹å¦‚: color=red&color=blue)
    if (params[key] !== undefined) {
      if (!Array.isArray(params[key])) {
        params[key] = [params[key]];
      }
      params[key].push(value);
    } else {
      params[key] = value;
    }
  }

  return params;
}

// æµ‹è¯•
const urls = [
  "https://example.com/search?q=test&page=1&filter=recent",
  "https://example.com/path?id=123&name=John+Doe&enabled=true",
  "https://example.com/products?category=books&sort=price&order=asc",
  "https://example.com/tags?tag=javascript&tag=regex&tag=tutorial",
  "https://example.com/search?q=ç‰¹æ®Š%20å­—ç¬¦&lang=zh-CN"
];

console.log("=== URLæŸ¥è¯¢å‚æ•°è§£æ ===");
urls.forEach(url => {
  console.log(`URL: ${url}`);
  console.log("è§£æç»“æœ:", getQueryParams(url));
  console.log("---");
});

// æ›´å®Œæ•´çš„URLè§£æå‡½æ•°
function parseCompleteURL(url) {
  try {
    // ä½¿ç”¨URL APIè¿›è¡Œè§£æï¼ˆç°ä»£æµè§ˆå™¨æ”¯æŒï¼‰
    const urlObj = new URL(url);
    const result = {
      protocol: urlObj.protocol.replace(':', ''),
      host: urlObj.host,
      hostname: urlObj.hostname,
      port: urlObj.port,
      pathname: urlObj.pathname,
      search: urlObj.search,
      hash: urlObj.hash,
      params: {}
    };

    // è§£ææŸ¥è¯¢å‚æ•°
    for (const [key, value] of urlObj.searchParams) {
      if (result.params[key] !== undefined) {
        if (!Array.isArray(result.params[key])) {
          result.params[key] = [result.params[key]];
        }
        result.params[key].push(value);
      } else {
        result.params[key] = value;
      }
    }

    return result;
  } catch (e) {
    // å›é€€åˆ°æ­£åˆ™è¡¨è¾¾å¼è§£æ
    const regex = /^(?:([^:/?#]+):)?(?:\/\/([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/;
    const match = url.match(regex);

    if (!match) return null;

    const result = {
      protocol: match[1] || '',
      host: match[2] || '',
      pathname: match[3] || '',
      search: match[4] ? `?${match[4]}` : '',
      hash: match[5] ? `#${match[5]}` : '',
      params: getQueryParams(url)
    };

    // è§£æä¸»æœºéƒ¨åˆ†
    const hostParts = result.host.split(':');
    result.hostname = hostParts[0];
    result.port = hostParts[1] || '';

    return result;
  }
}

// æµ‹è¯•å®Œæ•´URLè§£æ
console.log("\n=== å®Œæ•´URLè§£æ ===");
console.log(parseCompleteURL("https://user:pass@www.example.com:8080/path/to/page?id=123&q=test#section"));

// æ€§èƒ½æ¯”è¾ƒï¼šæ­£åˆ™è§£æ vs URL API
const testUrl = "https://example.com/search?q=test&page=1&filter=recent&sort=date&order=desc";

console.time('æ­£åˆ™è§£æ');
for (let i = 0; i < 10000; i++) {
  getQueryParams(testUrl);
}
console.timeEnd('æ­£åˆ™è§£æ');

console.time('URL API');
for (let i = 0; i < 10000; i++) {
  try {
    const urlObj = new URL(testUrl);
    const params = {};
    for (const [key, value] of urlObj.searchParams) {
      params[key] = value;
    }
  } catch (e) {}
}
console.timeEnd('URL API');
// URL APIé€šå¸¸æ¯”æ­£åˆ™è¡¨è¾¾å¼è§£ææ›´å¿«ï¼Œä½†å¯èƒ½ä¸æ”¯æŒæ‰€æœ‰ç¯å¢ƒ